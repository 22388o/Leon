let Bot = require('../events');
let {MessageType, MessageOptions, Mimetype} = require('@adiwajshing/baileys');
let fs = require('fs');
let axios = require('axios');
let got = require('got');
let Config = require('../config');

var IG_DESC = "Downloads medias from instagram with provided url."
var NEED_URL = "*You must enter a instagram media url to download!*"
var INVALID_URL = "*❌️ Entered url is not valid, Please enter a valid url!*"
var IG_STALK = "Fetches the details of the instagram user with provided username."
var NEED_USERNAME = "*You must enter a instagram username!*"
var INVALID_USERNAME = "*❌️ Entered username is not valid, Please enter a valid username!*"
var ERROR = "*An unknown error occurred!*"
var UA = "Username"
var NM = "Name"
var BGY = "Biography"
var LN = "Link"
var FLWRS = "Followers"
var FLWNG = "Following"
var PST = "Posts"
if (Config.LANG == 'ML') IG_DESC = "നൽകിയ url ഉപയോഗിച്ച് instagram-ൽ നിന്ന് മീഡിയകൾ ഡൗൺലോഡ് ചെയ്യുന്നു.", NEED_URL = "*ഡൗൺലോഡ് ചെയ്യുന്നതിന് നിങ്ങൾ ഒരു instagram മീഡിയ url നൽകണം!*", INVALID_URL = "*❌️ നൽകിയ url സാധുതയുള്ളതല്ല, ദയവായി ഒരു സാധുവായ url നൽകുക!*", IG_STALK = "നൽകിയിരിക്കുന്ന ഉപയോക്തൃനാമം ഉപയോഗിച്ച് ഇൻസ്റ്റാഗ്രാം ഉപയോക്താവിന്റെ വിശദാംശങ്ങൾ ലഭ്യമാക്കുന്നു.", NEED_USERNAME = "നിങ്ങൾ ഒരു instagram ഉപയോക്തൃനാമം നൽകണം!", INVALID_USERNAME = "*❌️ നൽകിയ ഉപയോക്തൃനാമം സാധുവല്ല, ദയവായി ഒരു സാധുവായ ഉപയോക്തൃനാമം നൽകുക!*", ERROR = "*ഒരു ​​അജ്ഞാത പിശക് സംഭവിച്ചു!*", UA = "ഉപയോക്തൃനാമം", NM = "പേര്", BGY = "ബയോഗ്രാഫി", LN = "ലിങ്ക്", FLWRS = "അനുയായികൾ", FLWNG = "പിന്തുടരുന്നവർ", PST = "പോസ്റ്റുകൾ"
if (Config.LANG == 'ID') IG_DESC = "നൽകിയ url ഉപയോഗിച്ച് instagram-ൽ നിന്ന് മീഡിയകൾ ഡൗൺലോഡ് ചെയ്യുന്നു.", NEED_URL = "*ഡൗൺലോഡ് ചെയ്യുന്നതിന് നിങ്ങൾ ഒരു instagram മീഡിയ url നൽകണം!*", INVALID_URL = "*❌️ നൽകിയ url സാധുതയുള്ളതല്ല, ദയവായി ഒരു സാധുവായ url നൽകുക!*", IG_STALK = "Mengambil detail pengguna instagram dengan nama pengguna yang disediakan.", NEED_USERNAME = "Anda harus memasukkan nama pengguna instagram!", INVALID_USERNAME = "*❌️ Nama pengguna yang dimasukkan tidak valid, Harap masukkan nama pengguna yang valid!*", ERROR = "*Terjadi kesalahan yang tidak diketahui!*", UA = "Nama belakang", NM = "Nama", BGY = "Biografi", LN = "Tautan", FLWRS = "Pengikut", FLWNG = "Mengikuti", PST = "Postingan"

Bot.addCommand({pattern: 'ig ?(.*)', fromMe: true, desc: IG_DESC}, (async (message, match) => {

var _0xea0d7e=_0x5983;(function(_0x388778,_0x3cbc4b){var _0x1a38e8=_0x5983,_0x1c1fa1=_0x388778();while(!![]){try{var _0x24a754=parseInt(_0x1a38e8(0x17a))/0x1+parseInt(_0x1a38e8(0x18c))/0x2*(-parseInt(_0x1a38e8(0x179))/0x3)+parseInt(_0x1a38e8(0x171))/0x4*(-parseInt(_0x1a38e8(0x190))/0x5)+parseInt(_0x1a38e8(0x176))/0x6+-parseInt(_0x1a38e8(0x17d))/0x7*(-parseInt(_0x1a38e8(0x189))/0x8)+-parseInt(_0x1a38e8(0x181))/0x9+-parseInt(_0x1a38e8(0x185))/0xa*(parseInt(_0x1a38e8(0x184))/0xb);if(_0x24a754===_0x3cbc4b)break;else _0x1c1fa1['push'](_0x1c1fa1['shift']());}catch(_0x4a585c){_0x1c1fa1['push'](_0x1c1fa1['shift']());}}}(_0x5e15,0x7fa96));function _0x5983(_0x2a3fb5,_0x10a6fe){var _0x5e1524=_0x5e15();return _0x5983=function(_0x598381,_0x2859be){_0x598381=_0x598381-0x171;var _0x527cca=_0x5e1524[_0x598381];return _0x527cca;},_0x5983(_0x2a3fb5,_0x10a6fe);}if(match[0x0][_0xea0d7e(0x182)](_0xea0d7e(0x178)))return;if(match[0x1]==='')return await message[_0xea0d7e(0x180)](NEED_URL);function _0x5e15(){var _0x71f8e1=['API','sendReply','2270259aGWZqI','match','url','22GqpJhR','2585080EBksUN','```\x0a\x0a*Powered\x20by\x20TOXIC\x20DEVIL\x20API*','LANG','body','185144aixPFJ','result','from','2LDoMmG','sendImage','arraybuffer','caption','4831205BLouvZ','4YskSrp','includes','```','data','get','6044790MpWEDw','message','igs','450984fGtprH','822698iFCZmY','mp4','```\x0a\x0a*TOXIC\x20DEVIL\x20API\x20അധികാരപ്പെടുത്തിയത്*','175uMQyHc','sendVideo'];_0x5e15=function(){return _0x71f8e1;};return _0x5e15();}let url=Config[_0xea0d7e(0x17f)]+'/downloader/instagram?url='+match[0x1],res=await got(url),json=JSON['parse'](res[_0xea0d7e(0x188)]);if(json['message'][_0xea0d7e(0x172)]('Invalid\x20URL!'))return await message['sendReply'](INVALID_URL);if(json[_0xea0d7e(0x177)][_0xea0d7e(0x172)]('ERROR'))return await message[_0xea0d7e(0x180)](ERROR);var results=json[_0xea0d7e(0x18a)]['result'],caption=json['result'][_0xea0d7e(0x18f)];caption=Config['LANG']=='ML'?'```'+caption+_0xea0d7e(0x17c):'```'+caption+_0xea0d7e(0x186);for(var result of results){var media=await axios[_0xea0d7e(0x175)](result[_0xea0d7e(0x183)],{'responseType':_0xea0d7e(0x18e)});return result['type']==_0xea0d7e(0x17b)?await message[_0xea0d7e(0x17e)](Buffer[_0xea0d7e(0x18b)](media[_0xea0d7e(0x174)]),caption):await message[_0xea0d7e(0x18d)](Buffer[_0xea0d7e(0x18b)](media[_0xea0d7e(0x174)]),Config[_0xea0d7e(0x187)]=='ML'?_0xea0d7e(0x173)+caption+_0xea0d7e(0x17c):_0xea0d7e(0x173)+caption+_0xea0d7e(0x186));}
}));

Bot.addCommand({pattern: 'igs ?(.*)', fromMe: true, desc: IG_STALK}, (async (message, match) => {

function _0x11dd(_0x344fe9,_0x20b199){const _0x333c9f=_0x333c();return _0x11dd=function(_0x11dd72,_0x4775e7){_0x11dd72=_0x11dd72-0x124;let _0x51269f=_0x333c9f[_0x11dd72];return _0x51269f;},_0x11dd(_0x344fe9,_0x20b199);}const _0x608b28=_0x11dd;function _0x333c(){const _0x362ee3=['parse','6933789vBqgcJ','_\x20:\x20*','link','sendImage','followers_count','LANG','sendReply','793650xzsufs','_➥\x20','Invalid\x20Username','17591101SufriH','arraybuffer','*Powered\x20by\x20TOXIC\x20DEVIL\x20API*','/stalk/instagram?username=','5665344IamZrp','includes','*TOXIC\x20DEVIL\x20API\x20അധികാരപ്പെടുത്തിയത്*','message','get','result','1vVjXiS','API','1243522eCfcrE','50jXafDm','10ShRkIt','body','username','ERROR','data','*\x0a_➥\x20','126092lksYdB','2665336ssfVyV','93zerKxJ','bio','name'];_0x333c=function(){return _0x362ee3;};return _0x333c();}(function(_0x1f0d1f,_0x422dd9){const _0x2e4c38=_0x11dd,_0x15c6e1=_0x1f0d1f();while(!![]){try{const _0x2c8b78=parseInt(_0x2e4c38(0x13d))/0x1*(parseInt(_0x2e4c38(0x124))/0x2)+parseInt(_0x2e4c38(0x125))/0x3*(parseInt(_0x2e4c38(0x147))/0x4)+parseInt(_0x2e4c38(0x140))/0x5*(parseInt(_0x2e4c38(0x130))/0x6)+parseInt(_0x2e4c38(0x13f))/0x7+-parseInt(_0x2e4c38(0x137))/0x8+-parseInt(_0x2e4c38(0x129))/0x9+parseInt(_0x2e4c38(0x141))/0xa*(-parseInt(_0x2e4c38(0x133))/0xb);if(_0x2c8b78===_0x422dd9)break;else _0x15c6e1['push'](_0x15c6e1['shift']());}catch(_0x22b56c){_0x15c6e1['push'](_0x15c6e1['shift']());}}}(_0x333c,0xb2d51));if(match[0x1]==='')return await message[_0x608b28(0x12f)](NEED_USERNAME);let url=Config[_0x608b28(0x13e)]+_0x608b28(0x136)+match[0x1],res=await got(url),json=JSON[_0x608b28(0x128)](res[_0x608b28(0x142)]);if(json['message'][_0x608b28(0x138)](_0x608b28(0x132)))return await message[_0x608b28(0x12f)](INVALID_USERNAME);if(json[_0x608b28(0x13a)]['includes'](_0x608b28(0x144)))return await message[_0x608b28(0x12f)](ERROR);let info=_0x608b28(0x131)+UA+_0x608b28(0x12a)+json[_0x608b28(0x13c)][_0x608b28(0x143)]+_0x608b28(0x146)+NM+_0x608b28(0x12a)+json['result'][_0x608b28(0x127)]+_0x608b28(0x146)+BGY+_0x608b28(0x12a)+json['result'][_0x608b28(0x126)]+_0x608b28(0x146)+LN+_0x608b28(0x12a)+json[_0x608b28(0x13c)][_0x608b28(0x12b)]+_0x608b28(0x146)+FLWRS+_0x608b28(0x12a)+json[_0x608b28(0x13c)][_0x608b28(0x12d)]+'*\x0a_➥\x20'+FLWNG+_0x608b28(0x12a)+json['result']['following_count']+'*\x0a_➥\x20'+PST+'_\x20:\x20*'+json[_0x608b28(0x13c)]['post_count']+'*\x0a\x0a'+(Config[_0x608b28(0x12e)]=='ML'?_0x608b28(0x139):_0x608b28(0x135));try{var pp=await axios[_0x608b28(0x13b)](json[_0x608b28(0x13c)]['profile_pic'],{'responseType':_0x608b28(0x134)});return await message[_0x608b28(0x12c)](Buffer['from'](pp[_0x608b28(0x145)]),info);}catch(_0x10c933){return await message[_0x608b28(0x12f)](info);}
}));
